const json = {
    "sizes": [
        4,
        3,
        3,
        10,
        1
    ],
    "layers": [
        {
            "0": {},
            "1": {},
            "2": {},
            "3": {}
        },
        {
            "0": {
                "bias": -0.019572965800762177,
                "weights": {
                    "0": 1.0399911403656006,
                    "1": 0.04655363783240318,
                    "2": 0.03988271206617355,
                    "3": -0.060278989374637604
                }
            },
            "1": {
                "bias": -0.06743261963129044,
                "weights": {
                    "0": -0.17860627174377441,
                    "1": 0.1898285150527954,
                    "2": -0.15857477486133575,
                    "3": -0.19197654724121094
                }
            },
            "2": {
                "bias": 0.008329341188073158,
                "weights": {
                    "0": -0.12443653494119644,
                    "1": -0.0753224566578865,
                    "2": -0.19239966571331024,
                    "3": 0.13718028366565704
                }
            }
        },
        {
            "0": {
                "bias": -0.10199388116598129,
                "weights": {
                    "0": 0.04781835526227951,
                    "1": 0.028627045452594757,
                    "2": 0.17943978309631348
                }
            },
            "1": {
                "bias": 0.647113025188446,
                "weights": {
                    "0": -0.842968761920929,
                    "1": 0.003842657897621393,
                    "2": -0.04126768186688423
                }
            },
            "2": {
                "bias": 0.17812328040599823,
                "weights": {
                    "0": -0.38611388206481934,
                    "1": 0.19970937073230743,
                    "2": 0.05603485181927681
                }
            }
        },
        {
            "0": {
                "bias": 0.38279056549072266,
                "weights": {
                    "0": -0.09107382595539093,
                    "1": -0.5645690560340881,
                    "2": -0.1840624064207077
                }
            },
            "1": {
                "bias": 0.0037536758463829756,
                "weights": {
                    "0": 0.06064755469560623,
                    "1": 0.33622387051582336,
                    "2": 0.18169549107551575
                }
            },
            "2": {
                "bias": 0.20478780567646027,
                "weights": {
                    "0": -0.0660221204161644,
                    "1": -0.268620103597641,
                    "2": -0.22355172038078308
                }
            },
            "3": {
                "bias": 0.19487136602401733,
                "weights": {
                    "0": -0.12520743906497955,
                    "1": -0.2731422483921051,
                    "2": -0.1444261372089386
                }
            },
            "4": {
                "bias": -0.17669034004211426,
                "weights": {
                    "0": -0.042950600385665894,
                    "1": -0.02870132029056549,
                    "2": -0.05044439807534218
                }
            },
            "5": {
                "bias": -0.12746648490428925,
                "weights": {
                    "0": 0.08269325643777847,
                    "1": 0.09772847592830658,
                    "2": -0.11486361920833588
                }
            },
            "6": {
                "bias": -0.028919300064444542,
                "weights": {
                    "0": -0.18919707834720612,
                    "1": -0.18547144532203674,
                    "2": 0.1679956018924713
                }
            },
            "7": {
                "bias": 0.0033751819282770157,
                "weights": {
                    "0": -0.001746481517329812,
                    "1": 0.3216424286365509,
                    "2": 0.24089159071445465
                }
            },
            "8": {
                "bias": 0.0011123178992420435,
                "weights": {
                    "0": 0.17639674246311188,
                    "1": 0.09900730848312378,
                    "2": 0.15799374878406525
                }
            },
            "9": {
                "bias": 0.005449446849524975,
                "weights": {
                    "0": -0.08913230895996094,
                    "1": 0.6165725588798523,
                    "2": 0.13089823722839355
                }
            }
        },
        {
            "0": {
                "bias": 0.382853239774704,
                "weights": {
                    "0": 0.5678120851516724,
                    "1": -0.3127197027206421,
                    "2": 0.31011831760406494,
                    "3": 0.2911047041416168,
                    "4": 0.05856355279684067,
                    "5": 0.08357524871826172,
                    "6": -0.13219688832759857,
                    "7": -0.31149765849113464,
                    "8": -0.11766785383224487,
                    "9": -0.5070461630821228
                }
            }
        }
    ],
    "outputLookup": false,
    "inputLookup": false,
    "activation": "relu",
    "trainOpts": {
        "iterations": 20000,
        "errorThresh": 0.005,
        "log": false,
        "logPeriod": 10,
        "learningRate": 0.3,
        "momentum": 0.1,
        "callbackPeriod": 10,
        "beta1": 0.9,
        "beta2": 0.999,
        "epsilon": 1e-8
    }
}

const brain = require('brain.js');

const config = {
    "binaryThresh": 0.059694821088657424,
    "hiddenLayers": [
        3,
        3,
        10
    ],
    "activation": "relu",
    "leakyReluAlpha": 0.13833080210127013
};
const net = new brain.NeuralNetwork(config);
net.fromJSON(json);

const randomFloat = () => {
    return parseFloat(Math.random().toFixed(2));
}

const generateSet = () => {
    let expected = randomFloat();
    expected = Math.round(expected * 3) / 4;
    return {
        input: [expected, randomFloat(), randomFloat(), randomFloat()],
        output: [expected],
    };
};

const results = {
    correct: 0,
    incorrect: 0,
};

for (let r = 0; r < 1000; r++) {
    const testSet = generateSet();
    const result = net.run(testSet.input);
    if (testSet.output[0] * 4 == Math.round(result[0] * 4)) {
        results.correct++;
    } else {
        results.incorrect++;
    }
}
console.log(results);

export {};
